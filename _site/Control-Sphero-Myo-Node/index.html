<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Control the Sphero with the Myo Armband in Node.js &#8211; Charlie Gerard</title>
<meta name="description" content="Learn how to program the Myo armband to control the Sphero using Node.js">
<meta name="keywords" content="">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="Control the Sphero with the Myo Armband in Node.js">
<meta name="twitter:description" content="Learn how to program the Myo armband to control the Sphero using Node.js">
<meta name="twitter:site" content="@charlie__gerard">


<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://charliegerard.github.io/blog/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Control the Sphero with the Myo Armband in Node.js">
<meta property="og:description" content="Learn how to program the Myo armband to control the Sphero using Node.js">
<meta property="og:url" content="http://charliegerard.github.io/blog/Control-Sphero-Myo-Node/">
<meta property="og:site_name" content="Charlie Gerard">

<meta property="og:image" content="http://charliegerard.github.io/blog/images/default-thumb.png">






<link rel="canonical" href="http://charliegerard.github.io/blog/Control-Sphero-Myo-Node/">
<link href="http://charliegerard.github.io/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Charlie Gerard Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://charliegerard.github.io/blog/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://charliegerard.github.io/blog/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://charliegerard.github.io/blog/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://charliegerard.github.io/blog/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://charliegerard.github.io/blog/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://charliegerard.github.io/blog/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://charliegerard.github.io/blog/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://charliegerard.github.io/blog/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://charliegerard.github.io/blog/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://charliegerard.github.io/blog/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://charliegerard.github.io/blog/">Charlie Gerard</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="http://charliegerard.github.io/blog/about" >About</a></li>
				
				    
				        
				        
				    <li><a href="http://charliegerard.github.io" target="_blank">Portfolio</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
  

<div itemscope itemtype="http://schema.org/Person">


	<img src="http://charliegerard.github.io/blog/blog/images/" class="bio-photo" alt=" bio photo">


  <h3 itemprop="name"></h3>
  <p></p>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="http://charliegerard.github.io/blog/Control-Sphero-Myo-Node/" rel="bookmark" title="Control the Sphero with the Myo Armband in Node.js">Control the Sphero with the Myo Armband in Node.js</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p><a href="https://charliegerard.files.wordpress.com/2015/01/myo-sphero-node.png"><img class="aligncenter size-full wp-image-118" src="https://charliegerard.files.wordpress.com/2015/01/myo-sphero-node.png" alt="myo-sphero-node" width="660" height="152" /></a></p>

<p>I received my<strong> <a title="Myo armband" href="https://www.thalmic.com/en/myo/" target="_blank">Myo armband</a></strong> a few months ago and I have been working on a few projects to control my other devices with it. To start with, I thought I would explain how I managed to control the<strong> <a title="Sphero" href="http://www.gosphero.com/" target="_blank">Sphero</a></strong> ball using the movements of my arms and <a title="Node.js" href="http://nodejs.org/" target="_blank"><strong>Node.js</strong></a>.</p>

<p>To follow along, you can view all the code on my <strong><a href="https://github.com/charliegerard/myo_sphero" target="_blank">github repo</a></strong>.</p>

<p>The setup of the server side is pretty straight-forward, here’s what is in my app.js file:</p>
<pre><code>
  var express = require('express'),
    path = require('path');

var app = express();

var lab = require('./my_modules/myo_sphero');
lab();

// app.use(express.static(path.join(__dirname, 'views')));

//.all('*', function(req, res){
// res.sendfile('views/index.html');
//});

app.listen(3001);
console.log("Server running on port 3001");

</code></pre>

<p>As you can see, you start by <strong>requiring ‘express’ and ‘path’</strong> to be able to start your server and serve your different files.</p>

<p>You then <strong>require the module</strong> you created and you call it so it can be executed when you start your app.</p>

<p>The commented part of the code gives you the ability to serve something in your browser as well by calling the files in your ‘views’ folder but I am not using it at the moment as I just make the connection between the Myo and the Sphero without building anything in the front-end. The first part calls all the files in your folder whereas the second part allows you to serve a single file.</p>

<p>Finally, the app uses the port 3001 that you can check in your browser by visiting http://localhost:3001.</p>

<p>Then, you can write your commands in your module; here’s a snippet of my index.js:</p>
<pre><code>
  module.exports = function() {

  var spheron = require('spheron');
  var myo = require('myo');

  myo = Myo.create();

  // Set this to the device Sphero connects as on your computer.
  var device = '/dev/tty.Sphero-RBR-AMP-SPP';

  var safeMode = true;

  var controlSphero = function(sphero) {
    myo.on('wave_out', function(){
      myo.setLockingPolicy();
      console.log('RIGHT');
      sphero.heading = 90;
      sphero.roll(70, 90, 1);
    })
  }
}</code></pre>

<p><strong>Wrap your code</strong> into a ‘module.exports’ function to access it from other files.</p>

<p>Then, <strong>require the modules</strong> you need, create an instance of the Myo and find the reference of the Sphero on your computer by entering ‘ls /dev/tty.Sphero*’ in your command line once your Sphero and your bluetooth connection are on.</p>

<p>The controlSphero function checks if you are doing the <strong>‘wave out’ movement</strong> with the Myo and if so, makes the Sphero roll to the right.</p>

<p>The <strong>myo.setLockingPolicy()</strong> command stops your Myo from being locked after a few seconds so you can keep on making movements and tracking them.</p>

<p>Myo updated their firmware and API recently and introduced an automatic locking of the armband to avoid accidental tracking of gesture but for this app, we need it to be turned off. You can usually pass in the value ‘none’ or ‘standard’ but I made it default to none. If you want to change this, you can find the myo.js file inside the myo module and find the function ‘setLockingPolicy’. You can learn more about this command on the <a href="https://developer.thalmic.com/docs/api_reference/platform/script-reference.html#script-api-setLockingPolicy" target="_blank">API reference</a>.</p>

<p>With the update of the firmware, new gestures have been added such as ‘index to thumb’ or ‘click’ and the ‘thumb to pinky’ has been removed so there is a little bit more you can play with.</p>

<p>Once again, if you’re interested, you can find the full code on my<a title="Controlling the Sphero with the Myo armband in Node.js" href="http://charliegerard.github.io/myo-sphero" target="_blank"> github.</a></p>

<p>Let me know if you have any question :) Good luck!</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://charliegerard.github.io/blog/Control-Sphero-Myo-Node/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://charliegerard.github.io/blog/Control-Sphero-Myo-Node/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://charliegerard.github.io/blog/Control-Sphero-Myo-Node/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Control the Sphero with the Myo Armband in Node.js</strong> was published on <time datetime="2015-09-21T00:00:00+10:00">September 21, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://charliegerard.github.io/blog/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="http://charliegerard.github.io/blog/Control-Drone-Myo-Node/" title="Controlling the Parrot AR Drone with the Myo Armband in Node.js">Controlling the Parrot AR Drone with the Myo Armband in Node.js</a></li>
    
      <li><a href="http://charliegerard.github.io/blog/Control-Drone-Leap-Motion-Cylon/" title="Controlling the Parrot AR Drone with the Leap Motion in Cylon.js">Controlling the Parrot AR Drone with the Leap Motion in Cylon.js</a></li>
    
      <li><a href="http://charliegerard.github.io/blog/Control-Sphero-Leap-Motion-Cylon/" title="Controlling the Sphero using the Leap Motion in Cylon.js">Controlling the Sphero using the Leap Motion in Cylon.js</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2015 Charlie Gerard. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://charliegerard.github.io/blog/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://charliegerard.github.io/blog/assets/js/scripts.min.js"></script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'charliegerardblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67921849-1', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>
