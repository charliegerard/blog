<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Getting started with Pact testing &#8211; Charlie Gerard</title>
<meta name="description" content="A few days ago, I had to run a brown bag session about Pact testing. I had absolutely no idea what it was but I had to prepare the workshop anyway so I started by...">
<meta name="keywords" content="technology, pact, testing, TDD">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="Getting started with Pact testing">
<meta name="twitter:description" content="A few days ago, I had to run a brown bag session about Pact testing. I had absolutely no idea what it was but I had to prepare the workshop anyway so I started by...">
<meta name="twitter:site" content="@charlie__gerard">
<meta name="twitter:creator" content="@charlie__gerard">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://charliegerard.github.io/blog/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Getting started with Pact testing">
<meta property="og:description" content="A few days ago, I had to run a brown bag session about Pact testing. I had absolutely no idea what it was but I had to prepare the workshop anyway so I started by...">
<meta property="og:url" content="http://charliegerard.github.io/blog/getting-started-pact-testing/">
<meta property="og:site_name" content="Charlie Gerard">

<meta property="og:image" content="http://charliegerard.github.io/blog/images/default-thumb.png">






<link rel="canonical" href="http://charliegerard.github.io/blog/getting-started-pact-testing/">
<link href="http://charliegerard.github.io/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Charlie Gerard Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://charliegerard.github.io/blog/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://charliegerard.github.io/blog/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://charliegerard.github.io/blog/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://charliegerard.github.io/blog/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://charliegerard.github.io/blog/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://charliegerard.github.io/blog/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://charliegerard.github.io/blog/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://charliegerard.github.io/blog/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://charliegerard.github.io/blog/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://charliegerard.github.io/blog/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://charliegerard.github.io/blog/">Charlie Gerard</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="http://charliegerard.github.io/blog/about" >About</a></li>
				
				    
				        
				    
				    <li><a href="http://charliegerard.github.io/blog/posts" >All Posts</a></li>
				
				    
				        
				        
				    <li><a href="http://charliegerard.github.io" target="_blank">Portfolio</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
  

<div itemscope itemtype="http://schema.org/Person">


	<img src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/4/005/048/342/17f9554.jpg" class="bio-photo" alt="Charlie Gerard bio photo">


  <h3 itemprop="name">Charlie Gerard</h3>
  <p>Software Developer & Creative technologist, I am passionate about the mix of science, art and technology</p>
  <a href="mailto:charlie.a.gerard@gmail.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
  <a href="http://twitter.com/charlie__gerard" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
  
  <a href="http://plus.google.com/+CharlieGerard" class="author-social" target="_blank"><i class="fa fa-fw fa-google-plus-square"></i> Google+</a>
  
  
  
  
  <a href="http://github.com/charliegerard" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  
  
  
  
  
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="http://charliegerard.github.io/blog/getting-started-pact-testing/" rel="bookmark" title="Getting started with Pact testing">Getting started with Pact testing</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>A few days ago, I had to run a brown bag session about Pact testing. I had absolutely no idea what it was but I had to prepare the workshop anyway so I started by looking at <a href="https://docs.pact.io/" target="_blank">this resource</a></p>

<p>The essence of it can be summarised in 3 words: “Consumer”, “Provider” and “Contracts”.</p>

<p>The goal of Pact testing is to let the ‘Consumer’ of a service specify and verify the interactions between different modules of an application.
Once the Consumer has defined what kind of interactions they want to have with the Provider, these ‘rules’ are written in a ‘pact’ file that is then available to the Provider.
The other services must then agree to these ‘Contracts’ and ensure that they are not breaking them.</p>

<p>For my workshop, I decided to implement an example in JavaScript using Jasmine and Node.js, but implementations of the Pact framework are available in other languages such as <a href="https://github.com/SEEK-Jobs/pact-net" target="_blank">.NET</a>, <a href="https://github.com/DiUS/pact-jvm" target="_blank">Java</a>, <a href="https://github.com/realestate-com-au/pact" target="_blank">Ruby</a>, etc…</p>

<h2 id="setup">Setup:</h2>

<p>To get started with Pact testing in JavaScript, I followed the steps indicated <a href="https://github.com/DiUS/pact-consumer-js-dsl" target="_blank">here</a></p>

<p>It basically consists of the following steps (for MAC OSX):</p>

<p>1- If you don’t have that already installed, install <a href="https://www.ruby-lang.org/en/downloads/" target="_blank">Ruby</a> &amp; <a href="https://rubygems.org/pages/download" target="_blank">RubyGems</a></p>

<p>2- Create a folder where your app is going to live and create a Gemfile.</p>

<p>3- In your terminal, cd into your app and run <code>gem install bundler &amp;&amp; bundle install</code>.</p>

<p>4- Inside your Gemfile, paste the following code:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="lineno">1</span> <span class="n">source</span> <span class="s1">&#39;https://rubygems.org&#39;</span>
<span class="lineno">2</span> <span class="n">gem</span> <span class="s1">&#39;pact-mock_service&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.7.0&#39;</span></code></pre></div>

<p>5- Run <code>bundle install</code> again.</p>

<p>6- Make sure you have Node.js and npm installed on your machine and run <code>npm init</code> to generate your <code>package.json</code> file.</p>

<p>7- Install Karma by running <code>npm install karma karma-jasmine karma-chrome-launcher --save-dev</code> and <code>npm install -g karma-cli</code></p>

<p>8- Run <code>karma init</code>. Answer <strong>jasmine</strong> for testing framework and <strong>no</strong> for use require.js.</p>

<p>9- Add pact-consumer-js-dsl to your project by running <code>bower install pact-consumer-js-dsl --save-dev</code>.</p>

<p>10- Tell Karma about pact-consumer-js-dsl.js in <code>karma.conf.js</code>. In the files: [] section add a new entry for <code>bower_components/pact-consumer-js-dsl/dist/pact-consumer-js-dsl.js</code></p>

<p>11- Allow tests to load resources from pact mock server. One way to do this is in the <code>karma.conf.js</code>, change <code>browsers: ['Chrome']</code>, or <code>browsers: ['PhantomJS']</code>, to</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="nx">browsers</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Chrome_without_security&#39;</span><span class="p">],</span>
<span class="lineno"> 2</span> <span class="nx">customLaunchers</span><span class="o">:</span> <span class="p">{</span>
<span class="lineno"> 3</span>    <span class="nx">Chrome_without_security</span><span class="o">:</span> <span class="p">{</span>
<span class="lineno"> 4</span>        <span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;Chrome&#39;</span><span class="p">,</span>
<span class="lineno"> 5</span>        <span class="nx">flags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;--disable-web-security&#39;</span><span class="p">]</span>
<span class="lineno"> 6</span>    <span class="p">}</span>
<span class="lineno"> 7</span> <span class="p">},</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="nx">or</span><span class="o">:</span>
<span class="lineno">10</span> 
<span class="lineno">11</span> <span class="nx">browsers</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;PhantomJS_without_security&#39;</span><span class="p">],</span>
<span class="lineno">12</span> <span class="nx">customLaunchers</span><span class="o">:</span> <span class="p">{</span>
<span class="lineno">13</span>    <span class="nx">PhantomJS_without_security</span><span class="o">:</span> <span class="p">{</span>
<span class="lineno">14</span>      <span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;PhantomJS&#39;</span><span class="p">,</span>
<span class="lineno">15</span>      <span class="nx">flags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;--web-security=false&#39;</span><span class="p">]</span>
<span class="lineno">16</span>    <span class="p">}</span>
<span class="lineno">17</span> <span class="p">},</span></code></pre></div>

<p>Once you’ve been through all of these steps, we can start writing our tests and implementations.</p>

<h2 id="consumer-test">Consumer test:</h2>

<p>Let’s start by writing the consumer test first, create a file called <code>client-spec.js</code>.</p>

<p>Let’s imagine we have a simple app that returns the word ‘hello’ when you make a GET request to ‘/hello’.</p>

<p>Our <code>client-spec.js</code> file is going to look something like this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="lineno"> 2</span>   <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Client&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
<span class="lineno"> 3</span>     <span class="kd">var</span> <span class="nx">client</span><span class="p">,</span> <span class="nx">provider</span><span class="p">;</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span>     <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="lineno"> 6</span>       <span class="nx">client</span> <span class="o">=</span> <span class="nx">exampleApp</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="s1">&#39;http://localhost:1234&#39;</span><span class="p">);</span>
<span class="lineno"> 7</span>       <span class="nx">provider</span> <span class="o">=</span> <span class="nx">Pact</span><span class="p">.</span><span class="nx">mockService</span><span class="p">({</span>
<span class="lineno"> 8</span>         <span class="nx">consumer</span><span class="o">:</span> <span class="s1">&#39;consumer&#39;</span><span class="p">,</span>
<span class="lineno"> 9</span>         <span class="nx">provider</span><span class="o">:</span> <span class="s1">&#39;provider&#39;</span><span class="p">,</span>
<span class="lineno">10</span>         <span class="nx">port</span><span class="o">:</span> <span class="mi">1234</span><span class="p">,</span>
<span class="lineno">11</span>         <span class="nx">done</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
<span class="lineno">12</span>           <span class="nx">expect</span><span class="p">(</span><span class="nx">err</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="lineno">13</span>         <span class="p">}</span>
<span class="lineno">14</span>       <span class="p">})</span>
<span class="lineno">15</span>     <span class="p">});</span>
<span class="lineno">16</span> 
<span class="lineno">17</span>     <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should say hello&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
<span class="lineno">18</span>       <span class="nx">provider</span>
<span class="lineno">19</span>         <span class="p">.</span><span class="nx">uponReceiving</span><span class="p">(</span><span class="s1">&#39;a request for hello&#39;</span><span class="p">)</span>
<span class="lineno">20</span>         <span class="p">.</span><span class="nx">withRequest</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;/hello&#39;</span><span class="p">)</span>
<span class="lineno">21</span>         <span class="p">.</span><span class="nx">willRespondWith</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span>
<span class="lineno">22</span>           <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span>
<span class="lineno">23</span>         <span class="p">},</span> <span class="p">{</span>
<span class="lineno">24</span>           <span class="nx">reply</span><span class="o">:</span> <span class="s1">&#39;hello&#39;</span>
<span class="lineno">25</span>         <span class="p">});</span>
<span class="lineno">26</span> 
<span class="lineno">27</span>       <span class="nx">provider</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">complete</span><span class="p">){</span>
<span class="lineno">28</span>         <span class="nx">expect</span><span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="lineno">29</span>         <span class="nx">complete</span><span class="p">();</span>
<span class="lineno">30</span>       <span class="p">})</span>
<span class="lineno">31</span>     <span class="p">})</span>
<span class="lineno">32</span>   <span class="p">})</span>
<span class="lineno">33</span> <span class="p">})()</span></code></pre></div>

<p>Basically what is happening here is that we are creating a mock server and mock provider service and we are checking that the call we are expecting to make to ‘/hello’ will return the response ‘hello’.</p>

<p>Before being able to run this test, we need to add it to the <code>files:[]</code> array in our <code>karma.conf.js</code> file.</p>

<p>Then, in your terminal, run:</p>

<p><code>
bundle exec pact-mock-service -p 1234 --pact-specification-version 2.0.0 -l log/pact.logs --pact-dir tmp/pacts
</code></p>

<p>And in another terminal window, run <code>karma start</code>.</p>

<p>At the moment, your test should fail because we have not yet written the implementation.</p>

<p>To do so, create a file called <code>client.js</code>.</p>

<p>This file should look something like this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="kd">var</span> <span class="nx">exampleApp</span> <span class="o">=</span> <span class="nx">exampleApp</span> <span class="o">||</span> <span class="p">{};</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="lineno"> 4</span>   <span class="kd">var</span> <span class="nx">baseUrl</span><span class="p">;</span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span>   <span class="k">this</span><span class="p">.</span><span class="nx">createServer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">){</span>
<span class="lineno"> 7</span>     <span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
<span class="lineno"> 8</span>     <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="lineno"> 9</span>   <span class="p">};</span>
<span class="lineno">10</span> 
<span class="lineno">11</span>   <span class="k">this</span><span class="p">.</span><span class="nx">sayHello</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
<span class="lineno">12</span>     <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="lineno">13</span>     <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/hello&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="lineno">14</span>     <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="lineno">15</span> 
<span class="lineno">16</span>     <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">).</span><span class="nx">reply</span><span class="p">;</span>
<span class="lineno">17</span>   <span class="p">}</span>
<span class="lineno">18</span> <span class="p">}).</span><span class="nx">apply</span><span class="p">(</span><span class="nx">exampleApp</span><span class="p">)</span></code></pre></div>

<p>As we can see, we have our function to mock the server, and our <code>sayHello</code> function that does the ‘GET’ request to ‘/hello’.</p>

<p>Before running the tests again, you’ll need to add the <code>client.js</code> file to the <code>karma.conf.js</code> file.</p>

<p>If you try again the 2 commands to run the tests, it should all pass this time.</p>

<p>Also, it should have generated a <code>tmp</code> folder with a json file inside, this is our <strong>pact file</strong> or ‘Contract’. This file specifies the terms of the contract between the Consumer and the Provider.</p>

<p>Now that our Consumer test is passing and we have our Pact file, we should work on the Provider implementation.</p>

<h2 id="provider-test">Provider test</h2>

<p>To start working on the server side, we need to install <a href="https://github.com/pact-foundation/pact-node" target="_blank">Pact-Node</a> and <a href="http://expressjs.com/" target="_blank">Express.js</a>:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno">1</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="err">@</span><span class="nx">pact</span><span class="o">-</span><span class="nx">foundation</span><span class="o">/</span><span class="nx">pact</span><span class="o">-</span><span class="nx">node</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span></code></pre></div>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno">1</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="nx">express</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span></code></pre></div>

<p>This should be all you need to install. Let’s get started with the Provider test.</p>

<p>Create a file called <code>provider-spec.js</code>; it should look like this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="kd">var</span> <span class="nx">pact</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@pact-foundation/pact-node&#39;</span><span class="p">);</span>
<span class="lineno"> 2</span> <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="lineno"> 3</span> 
<span class="lineno"> 4</span> <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{</span>
<span class="lineno"> 5</span>     <span class="nx">providerBaseUrl</span><span class="o">:</span> <span class="s1">&#39;http://localhost:3000&#39;</span><span class="p">,</span> <span class="c1">//API host endpoint</span>
<span class="lineno"> 6</span>     <span class="nx">pactUrls</span><span class="o">:</span> <span class="p">[</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;./tmp/pacts/consumer-provider.json&#39;</span><span class="p">)],</span> <span class="c1">//path to your pact files</span>
<span class="lineno"> 7</span> <span class="p">};</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="nx">pact</span><span class="p">.</span><span class="nx">verifyPacts</span><span class="p">(</span><span class="nx">opts</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="lineno">10</span>   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;SUCCESS!&#39;</span><span class="p">)</span>
<span class="lineno">11</span> <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
<span class="lineno">12</span>   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;failed&#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span>
<span class="lineno">13</span> <span class="p">});</span></code></pre></div>

<p>We start by requiring our modules, then we define the port on which the server is running and where to find our pact files, and finally we verify that our provider code meets the requirements of the contract (pact file).</p>

<p>To run this, we need to write the code for our server. Create a <code>provider.js</code> file, and write something like this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="lineno"> 2</span> <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="lineno"> 3</span> <span class="kd">var</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">);</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span> <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/hello&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 8</span>   <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span><span class="nx">reply</span><span class="o">:</span> <span class="s1">&#39;hello&#39;</span><span class="p">};</span>
<span class="lineno"> 9</span>   <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">});</span>
<span class="lineno">10</span>   <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="lineno">11</span> <span class="p">});</span>
<span class="lineno">12</span> 
<span class="lineno">13</span> <span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="lineno">14</span>   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Example app listening on port 3000!&#39;</span><span class="p">);</span>
<span class="lineno">15</span> <span class="p">});</span></code></pre></div>

<p>Here, we require the modules needed, we create our server, give it a port and implement the code for our ‘/hello’ request.</p>

<p>To check if our Provider works with our contract, open two new terminal window and in one of them, run <code>node provider.js</code> and in the other one, run <code>node provider-spec.js</code></p>

<p>You should see the message ‘SUCCESS’ being returned.</p>

<p>That’s it! If everything works fine you’ve just written your first Consumer and Provider Pact test! :)</p>

<p>If you need more info, here’s a <a href="http://techblog.newsweaver.com/why-should-you-use-consumer-driven-contracts-for-microservices-integration-tests/" target="_blank">good article</a> I found about Pact testing.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://charliegerard.github.io/blog/getting-started-pact-testing/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://charliegerard.github.io/blog/getting-started-pact-testing/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://charliegerard.github.io/blog/getting-started-pact-testing/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Getting started with Pact testing</strong> was published on <time datetime="2016-10-04T00:00:00+01:00">October 04, 2016</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://charliegerard.github.io/blog/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="http://charliegerard.github.io/blog/Arduino-MKR1000-Hello-World/" title="Hello World with the Arduino MKR1000 and Johnny-Five">Hello World with the Arduino MKR1000 and Johnny-Five</a></li>
    
      <li><a href="http://charliegerard.github.io/blog/Control-Sphero-Drone-Neurosky-Cylon/" title="Control the Sphero and Parrot AR Drone with the Neurosky brain sensor in Cylon.js">Control the Sphero and Parrot AR Drone with the Neurosky brain sensor in Cylon.js</a></li>
    
      <li><a href="http://charliegerard.github.io/blog/Experimenting-Creative-Technologies/" title="Experimenting with Creative Technologies">Experimenting with Creative Technologies</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2017 Charlie Gerard. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://charliegerard.github.io/blog/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://charliegerard.github.io/blog/assets/js/scripts.min.js"></script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'charliegerardblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67921849-1', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>
